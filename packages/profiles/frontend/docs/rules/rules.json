{
  "version": "1.3.0",
  "meta": {
    "mode": "advisory",
    "maxComments": 7,
    "largePrThreshold": 150,
    "priority": ["architecture", "testing", "a11y", "dx"],
    "enforceSeverity": true,
    "ignorePaths": [
      "dist/**",
      "coverage/**",
      "node_modules/**",
      "**/*.snap",
      "**/*.map",
      "**/*.min.*"
    ],
    "dedupePolicy": "per-rule",
    "groupSimilarFindings": true,
    "ciFailNote": "Fix CI (lint/ts/tests) first, then rerun AI review.",
    "language": "ru",
    "outputFormat": {
      "dual": true,
      "machine": {
        "format": "json",
        "rootKey": "ai_review",
        "schema": {
          "requiredFields": [
            "rule",
            "link",
            "severity",
            "area",
            "file",
            "locator",
            "finding",
            "suggestion"
          ],
          "fingerprint": "sha1(rule + '|' + file + '|' + locator)"
        }
      },
      "heading": "## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Code Review (advisory)",
      "fields": {
        "severity": "–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å",
        "area": "–û–±–ª–∞—Å—Ç—å",
        "rule": "–ü—Ä–∞–≤–∏–ª–æ",
        "finding": "–ù–∞—Ö–æ–¥–∫–∞",
        "why": "–ü–æ—á–µ–º—É",
        "suggestion": "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ"
      },
      "severityLabels": {
        "critical": "–∫—Ä–∏—Ç–∏—á–Ω–æ",
        "advisory": "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è"
      },
      "areaLabels": {
        "architecture": "–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞",
        "testing": "—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
        "a11y": "–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å",
        "dx": "DX",
        "performance": "–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å",
        "naming": "–Ω–µ–π–º–∏–Ω–≥"
      },
      "strict": true,
      "noIntro": true,
      "noOutro": true,
      "sort": {
        "by": ["severity", "meta.priority"],
        "severityOrder": ["–∫—Ä–∏—Ç–∏—á–Ω–æ", "—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è"]
      }
    }
  },
  "rules": [
    {
      "id": "ARCH_BOUNDARIES",
      "area": "architecture",
      "severity": "critical",
      "owner": "@frontend-arch",
      "description": "Respect import boundaries (see boundaries.json)",
      "link": "docs/handbook/ARCHITECTURE.md#import-boundaries",
      "examples": {
        "bad": "features imports pages/*",
        "good": "pages compose features; features depend on entities/shared"
      }
    },
    {
      "id": "ARCH_LAYERING_PAGES",
      "area": "architecture",
      "severity": "critical",
      "owner": "@frontend-arch",
      "description": "pages may import features, entities, ui, orgui, shared, modules",
      "link": "docs/handbook/ARCHITECTURE.md#import-gradient"
    },
    {
      "id": "ARCH_LAYERING_FEATURES",
      "area": "architecture",
      "severity": "critical",
      "owner": "@frontend-arch",
      "description": "features may import entities, ui, shared, modules",
      "link": "docs/handbook/ARCHITECTURE.md#import-gradient"
    },
    {
      "id": "ARCH_LAYERING_ENTITIES",
      "area": "architecture",
      "severity": "critical",
      "owner": "@frontend-arch",
      "description": "entities may import ui, shared, modules",
      "link": "docs/handbook/ARCHITECTURE.md#import-gradient"
    },
    {
      "id": "ARCH_LAYERING_UI",
      "area": "architecture",
      "severity": "advisory",
      "owner": "@frontend-core",
      "description": "ui-components import horizontally within ui-components only",
      "link": "docs/handbook/ARCHITECTURE.md#import-gradient"
    },
    {
      "id": "ARCH_LAYERING_ORGUI",
      "area": "architecture",
      "severity": "advisory",
      "owner": "@frontend-core",
      "description": "org-components may import ui-components and shared",
      "link": "docs/handbook/ARCHITECTURE.md#import-gradient"
    },
    {
      "id": "ARCH_LAYERING_MODULES",
      "area": "architecture",
      "severity": "advisory",
      "owner": "@frontend-core",
      "description": "modules may import modules, ui-components, shared",
      "link": "docs/handbook/ARCHITECTURE.md#import-gradient"
    },
    {
      "id": "TESTS_FOR_FEATURES",
      "area": "testing",
      "severity": "advisory",
      "owner": "@qa-frontend",
      "description": "When touching src/features/** ensure relevant tests exist",
      "link": "docs/handbook/TESTING.md#mandatory",
      "examples": {
        "bad": "feature edited, no *.spec.ts changed",
        "good": "added RTL test covering user flow"
      }
    },
    {
      "id": "A11Y_DIALOG_FOCUS",
      "area": "a11y",
      "severity": "advisory",
      "owner": "@frontend-a11y",
      "description": "Dialogs/drawers manage focus (focus trap + initial focus) and are keyboard reachable",
      "link": "docs/handbook/ACCESSIBILITY.md#dialogs",
      "examples": {
        "bad": "modal opens with no focus; ESC does nothing",
        "good": "focus sent to first interactive control; ESC closes"
      }
    },
    {
      "id": "VUE_SCRIPT_SETUP_ONLY",
      "area": "vue",
      "severity": "advisory",
      "owner": "@frontend-core",
      "description": "Use <script setup lang=\"ts\"> only; no Options API",
      "link": "docs/handbook/STYLEGUIDE.md#vue--ts"
    },
    {
      "id": "VUE_TYPED_EMITS",
      "area": "vue",
      "severity": "advisory",
      "owner": "@frontend-core",
      "description": "Define typed emits and props in components",
      "link": "docs/handbook/STYLEGUIDE.md#vue--ts",
      "examples": {
        "bad": "defineEmits(['change'])",
        "good": "defineEmits<{(e:'change', v:Row): void}>()"
      }
    },
    {
      "id": "TS_NO_IMPLICIT_ANY",
      "area": "typescript",
      "severity": "advisory",
      "owner": "@frontend-core",
      "description": "noImplicitAny must be respected",
      "link": "docs/handbook/STYLEGUIDE.md#vue--ts"
    },
    {
      "id": "TS_NO_UNCHECKED_INDEXED_ACCESS",
      "area": "typescript",
      "severity": "advisory",
      "owner": "@frontend-core",
      "description": "noUncheckedIndexedAccess must be respected",
      "link": "docs/handbook/STYLEGUIDE.md#vue--ts"
    },
    {
      "id": "NAMING_COMPONENTS",
      "area": "dx",
      "severity": "advisory",
      "owner": "@frontend-core",
      "description": "Components use PascalCase; composables use useXxx; events use noun:verb or update:modelValue",
      "link": "docs/handbook/STYLEGUIDE.md#naming",
      "examples": {
        "bad": "configuration-group.vue, useconfiguration.ts",
        "good": "ConfigurationGroup.vue, useConfiguration.ts, row:removed"
      }
    }
  ],
  "paths": {
    "ui": "src/ui-components/**",
    "orgui": "src/org-components/**",
    "modules": "src/modules/**",
    "features": "src/features/**",
    "entities": "src/entities/**",
    "pages": "src/pages/**",
    "shared": "src/shared/**"
  },
  "vue": { "scriptSetupOnly": true, "typedEmits": true },
  "typescript": { "noImplicitAny": true, "noUncheckedIndexedAccess": true },
  "testing": { "framework": "vitest", "rtl": true, "requireTestsWhenTouching": ["src/features/**"] },
  "architecture": {
    "boundaries": "./docs/rules/boundaries.json",
    "layering": {
      "pagesImport": ["features", "entities", "ui", "orgui", "shared", "modules"],
      "featuresImport": ["entities", "ui", "shared", "modules"],
      "entitiesImport": ["ui", "shared", "modules"],
      "uiImport": ["ui"],
      "orguiImport": ["ui", "shared"],
      "modulesImport": ["modules", "ui", "shared"]
    }
  },
  "docs": {
    "links": {
      "style": "docs/handbook/STYLEGUIDE.md",
      "arch": "docs/handbook/ARCHITECTURE.md",
      "test": "docs/handbook/TESTING.md",
      "a11y": "docs/handbook/ACCESSIBILITY.md"
    }
  }
}
